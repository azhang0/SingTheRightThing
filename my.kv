WindowManager:
    MainWindow:
    SecondWindow:
    ThirdWindow:
    FourthWindow:
    FifthWindow:
    SixthWindow:
    SeventhWindow:

<MainWindow>:
    name: "main"

    GridLayout:
        cols:1
        Image:
            source: 'logo.png'
        Button:
            id: next
            text: "Click to get started!"
            on_release:
                root.start_app()
                app.root.current = "demo selection"
                root.manager.transition.direction = "left"

<SecondWindow>:
    name: "demo selection"    
    GridLayout:
        cols:1
        Image:
            source: 'logo.png'
        
        Label:
            text: 'Demo Selection'
        
        GridLayout:
            cols:2
            Button:
                id: yes
                text: "Yes"
                on_release:
                    root.manager.demo = True
                    app.root.current = "song selection" 
                    root.manager.transition.direction = "left"

            Button:
                id: no
                text: "No"
                on_release:
                    root.manager.demo = False
                    app.root.current = "song selection" 
                    root.manager.transition.direction = "left"

            # Button:
            #     text: "Next"
            #     on_release:
            #         app.root.current = "song selection" if root.manager.demo is not None else "demo selection"
            #         root.manager.transition.direction = "left"
                    
<ThirdWindow>:
    name: "song selection"
    GridLayout:
        cols:1
        Image:
            source: 'logo.png'
        
        Label:
            text: 'Song Selection'
        
        GridLayout:
            cols: 4
            Button:
                id: previous
                text: "Previous"
                on_release:
                    app.root.current = "demo selection" 
                    root.manager.transition.direction = "right"

            Button:
                id: play
                text: "Play"
                on_release:
                    pass
            Button:
                id: pause
                text: "Pause"
                on_release:
                    pass
                
            Button:
                id: next
                text: "Next"
                on_release:
                    app.root.current = "cover selection" if root.manager.orig_path is not None else "song selection"
                    root.manager.transition.direction = "left"

<FourthWindow>:
    name: "cover selection"
    GridLayout:
        cols:1
        Image:
            source: 'logo.png'
        
        Label:
            text: 'Cover Selection'
        
        GridLayout:
            cols: 4
            Button:
                id: previous
                text: "Previous"
                on_release:
                    app.root.current = "song selection" 
                    root.manager.transition.direction = "right"

            Button:
                id: play
                text: "Play"
                on_release:
                    pass
            Button:
                id: pause
                text: "Pause"
                on_release:
                    pass

            Button:
                id: next
                text: "Next"
                on_release:
                    app.root.current = "strip audio" if root.manager.cover_path is not None else "cover selection"
                    root.manager.transition.direction = "left"


<FifthWindow>:
    name: "strip audio"
    GridLayout:
        cols:1
        Image:
            source: 'logo.png'
        
        Label:
            text: 'Audio Processing'
        
        GridLayout:
            cols: 2
            ToggleButton:
                id: original
                text: "Original"
                group: "toggle"
                state: "down"
                on_release: 
                    pass
            ToggleButton:
                id: cover
                text: "Cover"
                group: "toggle"
                on_release: 
                    pass    
            
        GridLayout:
            cols: 4
            Button:
                id: previous
                text: "Previous"
                on_release:
                    app.root.current = "cover selection" 
                    root.manager.transition.direction = "right"

            Button:
                id: play
                text: "Play"
                on_release:
                    pass
            Button:
                id: pause
                text: "Pause"
                on_release:
                    pass

            Button:
                id: next
                text: "Next"
                on_release:
                    app.root.current = "sync up" if root.manager.cover_vocals_path is not None else "strip audio"
                    root.manager.transition.direction = "left"

<SixthWindow>:
    name: "sync up"
    GridLayout:
        cols:1
        Image:
            source: 'logo.png'
        
        Label:
            text: 'Song Synchronization'

        Graph:
            id: synced_graph
            xlabel: 'Time (s)'
            ylabel: 'Frequency (Hz)'

        GridLayout:
            cols: 2
            Button:
                id: previous
                text: "Previous"
                on_release:
                    app.root.current = "strip audio" 
                    root.manager.transition.direction = "right"


            Button:
                id: next
                text: "Next"
                on_release:
                    app.root.current = "score" if root.manager.synced_graph is not None else "sync up"
                    root.manager.transition.direction = "left"    


<SeventhWindow>:
    name: "score"
    GridLayout:
        cols:1
        Image:
            source: 'logo.png'
        
        Label:
            text: 'Score'
        GridLayout:
            cols: 2
            ToggleButton:
                id: full
                text: "Full Song"
                group: "toggle"
                state: "down"
                on_release: 
                    pass
            ToggleButton:
                id: snippet
                text: "Red Part"
                group: "toggle"
                on_release: 
                    pass    
        GridLayout:
            cols: 3
            Button:
                id: previous
                text: "Previous"
                on_release:
                    app.root.current = "sync up" 
                    root.manager.transition.direction = "right"

            Button:
                id: play
                text: "Play"
                on_release:
                    pass
            Button:
                id: pause
                text: "Pause"
                on_release:
                    pass

            Button:
                id: next
                text: "Restart"
                on_release:
                    app.root.current = "main" 
                    root.manager.transition.direction = "left"    