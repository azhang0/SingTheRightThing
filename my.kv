WindowManager:
    MainWindow:
    SecondWindow:
    ThirdWindow:
    ThirdWindowDemo:
    FourthWindow:
    FourthWindowDemo:
    FifthWindow:
    FakeSixthWindow:
    SixthWindow:
    FakeSeventhWindow:
    SeventhWindow:

<MainWindow>:
    name: "main"

    GridLayout:
        cols:1
        Image:
            source: 'logo.png'
        Button:
            id: next
            text: "Click to get started!"
            on_release:
                root.start_app()
                app.root.current = "demo selection"
                root.manager.transition.direction = "left"

<SecondWindow>:
    name: "demo selection"    
    GridLayout:
        cols:1
        Image:
            source: 'logo.png'
        
        Label:
            text: root.demo_query
        
        GridLayout:
            cols:2
            Button:
                id: yes
                text: "Yes"
                on_release:
                    root.manager.demo = True
                    app.root.current = "song selection demo" 
                    root.manager.transition.direction = "left"

            Button:
                id: no
                text: "No"
                on_release:
                    root.manager.demo = False
                    app.root.current = "song selection" 
                    root.manager.transition.direction = "left"

<ThirdWindow>:
    name: "song selection"
    GridLayout:
        cols:1
        Image:
            source: 'logo.png'
        
        Label:
            text: 'Follow the prompts to select your song.'
        
        GridLayout:
            cols:3
            Label:
                text: "YouTube link"
            TextInput:
                id: yt_url
            Button:
                text: "Submit"
                on_release:
                    root.process_link()


        GridLayout:
            cols: 4
            Button:
                id: previous
                text: "Previous"
                on_release:
                    app.root.current = "demo selection" 
                    root.manager.transition.direction = "right"

            Button:
                id: play
                text: "Play"
                on_release:
                    pass
            Button:
                id: pause
                text: "Pause"
                on_release:
                    pass
                
            Button:
                id: next
                text: "Next"
                on_release:
                    app.root.current = "cover selection" if root.manager.orig_path is not None else "song selection"
                    root.manager.transition.direction = "left"

<ThirdWindowDemo>:
    name: "song selection demo"
    GridLayout:
        cols:1
        Image:
            source: 'logo.png'
        
        Label:
            text: 'The demo song is Blank Space by Taylor Swift.'
        
        GridLayout:
            cols: 4
            Button:
                id: previous
                text: "Previous"
                on_release:
                    app.root.current = "demo selection" 
                    root.manager.transition.direction = "right"

            Button:
                id: play
                text: "Play"
                on_release:
                    pass
            Button:
                id: pause
                text: "Pause"
                on_release:
                    pass
                
            Button:
                id: next
                text: "Next"
                on_release:
                    app.root.current = "cover selection demo" if root.manager.orig_path is not None else "song selection demo"
                    root.manager.transition.direction = "left"

<FourthWindow>:
    name: "cover selection"
    GridLayout:
        cols:1
        Image:
            source: 'logo.png'
        
        Label:
            text: 'Record your cover here.'
        
        Button:
            id: record
            text: "Record"
            on_release:
                root.record_cover()

        GridLayout:
            cols: 4
            Button:
                id: previous
                text: "Previous"
                on_release:
                    app.root.current = "song selection" 
                    root.manager.transition.direction = "right"

            Button:
                id: play
                text: "Play"
                on_release:
                    pass
            Button:
                id: pause
                text: "Pause"
                on_release:
                    pass

            Button:
                id: next
                text: "Next"
                on_release:
                    app.root.current = "strip audio" if root.manager.cover_path is not None else "cover selection"
                    root.manager.transition.direction = "left"

<FourthWindowDemo>:
    name: "cover selection demo"
    GridLayout:
        cols:1
        Image:
            source: 'logo.png'
        
        Label:
            text: "The demo cover is from Ali Brustofski's YouTube channel."
            size_hint_x: 0.7

        GridLayout:
            cols: 4
            Button:
                id: previous
                text: "Previous"
                on_release:
                    app.root.current = "song selection demo" 
                    root.manager.transition.direction = "right"

            Button:
                id: play
                text: "Play"
                on_release:
                    pass
            Button:
                id: pause
                text: "Pause"
                on_release:
                    pass

            Button:
                id: next
                text: "Next"
                on_release:
                    app.root.current = "strip audio" if root.manager.cover_path is not None else "cover selection demo"
                    root.manager.transition.direction = "left"

<FifthWindow>:
    name: "strip audio"
    GridLayout:
        cols:1
        Image:
            source: 'logo.png'
        
        Label:
            text: root.explanation
            size_hint_x: 0.7

        GridLayout:
            cols: 2
            ToggleButton:
                id: original
                text: "Original"
                group: "toggle"
                on_release: 
                    pass
            ToggleButton:
                id: cover
                text: "Cover"
                group: "toggle"
                on_release: 
                    pass    
            
        GridLayout:
            cols: 4
            Button:
                id: previous
                text: "Previous"
                on_release:
                    app.root.current = "cover selection" 
                    root.manager.transition.direction = "right"

            Button:
                id: play
                text: "Play"
                on_release:
                    pass
            Button:
                id: pause
                text: "Pause"
                on_release:
                    pass

            Button:
                id: next
                text: "Next"
                on_release:
                    app.root.current = "fake sync up" if root.manager.cover_vocals_path is not None else "strip audio"
                    root.manager.transition.direction = "left"

<FakeSixthWindow>:
    name: "fake sync up"
    GridLayout:
        cols:1
        Image:
            source: 'logo.png'
        
        Label:
            text: root.explanation
            size_hint_x: 0.7


        GridLayout:
            cols: 2
            Button:
                id: previous
                text: "Previous"
                on_release:
                    app.root.current = "strip audio" 
                    root.manager.transition.direction = "right"


            Button:
                id: next
                text: "Next"
                on_release:
                    app.root.current = "sync up" 
                    root.manager.transition.direction = "left"    

<SixthWindow>:
    name: "sync up"
    GridLayout:
        cols:1
        Image:
            source: 'logo.png'
            size_hint_x: 1
        
        Label:
            text: 'Synced Up Songs (Original on top)'

        Image:
            size_hint_x: 1
            source: root.manager.synced_graph

        GridLayout:
            cols: 2
            Button:
                id: previous
                text: "Previous"
                on_release:
                    app.root.current = "strip audio" 
                    root.manager.transition.direction = "right"


            Button:
                id: next
                text: "Next"
                on_release:
                    app.root.current = "fake score" 
                    root.manager.transition.direction = "left"    
<FakeSeventhWindow>:
    name: "fake score"
    GridLayout:
        cols:1
        Image:
            source: 'logo.png'
        
        Label:
            text: 'I will now calculate your score.'
        GridLayout:
            cols: 2
            ToggleButton:
                id: full
                text: "Full Song"
                group: "toggle"
                # state: "down"
                on_release: 
                    pass
            ToggleButton:
                id: snippet
                text: "Red Part"
                group: "toggle"
                on_release: 
                    pass    
        GridLayout:
            cols: 4
            Button:
                id: previous
                text: "Previous"
                on_release:
                    app.root.current = "sync up" 
                    root.manager.transition.direction = "right"

            Button:
                id: play
                text: "Play"
                on_release:
                    pass
            Button:
                id: pause
                text: "Pause"
                on_release:
                    pass

            Button:
                id: next
                text: "Restart"
                on_release:
                    app.root.current = "score" 
                    root.manager.transition.direction = "left"    
<SeventhWindow>:
    name: "score"
    GridLayout:
        cols:1
        Image:
            source: 'logo.png'
        
        Label:
            text: 'Score'

        Image:
            source: root.manager.score_graph
            size_hint_x: 1

        GridLayout:
            cols: 2
            ToggleButton:
                id: full
                text: "Full Song"
                group: "toggle"
                state: "down"
                on_release: 
                    pass
            ToggleButton:
                id: snippet
                text: "Red Part"
                group: "toggle"
                on_release: 
                    pass    
        GridLayout:
            cols: 4
            Button:
                id: previous
                text: "Previous"
                on_release:
                    app.root.current = "sync up" 
                    root.manager.transition.direction = "right"

            Button:
                id: play
                text: "Play"
                on_release:
                    pass
            Button:
                id: pause
                text: "Pause"
                on_release:
                    pass

            Button:
                id: next
                text: "Restart"
                on_release:
                    app.root.current = "main" 
                    root.manager.transition.direction = "left"    